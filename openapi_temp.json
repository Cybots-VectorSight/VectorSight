{"openapi":"3.1.0","info":{"title":"VectorSight","description":"SVG spatial analysis engine â€” geometry transforms for LLM comprehension","version":"0.1.0"},"paths":{"/api/health":{"get":{"summary":"Health","operationId":"health_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/analyze":{"post":{"summary":"Analyze","operationId":"analyze_api_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnalyzeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat":{"post":{"summary":"Chat","operationId":"chat_api_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/stream":{"post":{"summary":"Chat Stream","operationId":"chat_stream_api_chat_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/modify":{"post":{"summary":"Modify","operationId":"modify_api_modify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModifyResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/create":{"post":{"summary":"Create","operationId":"create_api_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/icon-set/analyze":{"post":{"summary":"Analyze Set","operationId":"analyze_set_api_icon_set_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IconSetAnalyzeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IconSetRulesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/icon-set/generate":{"post":{"summary":"Generate Icon","operationId":"generate_icon_api_icon_set_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IconSetGenerateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IconSetGenerateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/playground/click":{"post":{"summary":"Handle Click","operationId":"handle_click_api_playground_click_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaygroundClickRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaygroundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/feedback":{"post":{"summary":"Submit Feedback","description":"Record analysis feedback to improve future predictions.","operationId":"submit_feedback_api_feedback_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/feedback/reflect":{"post":{"summary":"Self Reflect","description":"On-demand self-reflection: run pipeline, get LLM answer, then vision-verify.","operationId":"self_reflect_api_feedback_reflect_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReflectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReflectResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/feedback/patterns":{"get":{"summary":"Get Patterns","description":"Get all learned patterns.","operationId":"get_patterns_api_feedback_patterns_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatternsResponse"}}}}}}}},"components":{"schemas":{"AnalyzeRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"Raw SVG code"},"options":{"additionalProperties":{"type":"boolean"},"type":"object","title":"Options","description":"Optional feature flags (e.g., skip_layer3=True)"}},"type":"object","required":["svg"],"title":"AnalyzeRequest"},"AnalyzeResponse":{"properties":{"enrichment":{"$ref":"#/components/schemas/EnrichmentOutput"},"processing_time_ms":{"type":"number","title":"Processing Time Ms","default":0.0},"transforms_completed":{"type":"integer","title":"Transforms Completed","default":0},"transforms_failed":{"type":"integer","title":"Transforms Failed","default":0},"errors":{"additionalProperties":{"type":"string"},"type":"object","title":"Errors"}},"type":"object","required":["enrichment"],"title":"AnalyzeResponse"},"ChatRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"Raw SVG code"},"question":{"type":"string","title":"Question","description":"User's question about the SVG"},"history":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"History","description":"Chat history (role/content pairs)"}},"type":"object","required":["svg","question"],"title":"ChatRequest"},"ChatResponse":{"properties":{"answer":{"type":"string","title":"Answer"},"enrichment_used":{"type":"boolean","title":"Enrichment Used","default":true}},"type":"object","required":["answer"],"title":"ChatResponse"},"ClusterInfo":{"properties":{"cluster_id":{"type":"integer","title":"Cluster Id"},"members":{"items":{"type":"string"},"type":"array","title":"Members"},"centroid":{"prefixItems":[{"type":"number"},{"type":"number"}],"type":"array","maxItems":2,"minItems":2,"title":"Centroid","default":[0.0,0.0]},"description":{"type":"string","title":"Description","default":""}},"type":"object","required":["cluster_id"],"title":"ClusterInfo"},"ComponentInfo":{"properties":{"component_id":{"type":"integer","title":"Component Id"},"members":{"items":{"type":"string"},"type":"array","title":"Members"},"description":{"type":"string","title":"Description","default":""}},"type":"object","required":["component_id"],"title":"ComponentInfo"},"ContainmentRelation":{"properties":{"parent":{"type":"string","title":"Parent"},"children":{"items":{"type":"string"},"type":"array","title":"Children"}},"type":"object","required":["parent"],"title":"ContainmentRelation"},"CreateRequest":{"properties":{"description":{"type":"string","title":"Description","description":"Description of icon to create"},"style":{"type":"string","title":"Style","description":"Icon style (outline, filled, etc.)","default":"outline"},"canvas_size":{"type":"integer","title":"Canvas Size","description":"Canvas width/height","default":24}},"type":"object","required":["description"],"title":"CreateRequest"},"CreateResponse":{"properties":{"svg":{"type":"string","title":"Svg"},"intent":{"type":"string","title":"Intent","default":""},"validation_passed":{"type":"boolean","title":"Validation Passed","default":false}},"type":"object","required":["svg"],"title":"CreateResponse"},"ElementSummary":{"properties":{"id":{"type":"string","title":"Id"},"shape_class":{"type":"string","title":"Shape Class","default":"organic"},"area":{"type":"number","title":"Area","default":0.0},"bbox":{"prefixItems":[{"type":"number"},{"type":"number"},{"type":"number"},{"type":"number"}],"type":"array","maxItems":4,"minItems":4,"title":"Bbox","default":[0.0,0.0,0.0,0.0]},"centroid":{"prefixItems":[{"type":"number"},{"type":"number"}],"type":"array","maxItems":2,"minItems":2,"title":"Centroid","default":[0.0,0.0]},"circularity":{"type":"number","title":"Circularity","default":0.0},"convexity":{"type":"number","title":"Convexity","default":0.0},"aspect_ratio":{"type":"number","title":"Aspect Ratio","default":1.0},"size_tier":{"type":"string","title":"Size Tier","default":"MEDIUM"}},"type":"object","required":["id"],"title":"ElementSummary"},"EnrichmentOutput":{"properties":{"source":{"type":"string","title":"Source","default":""},"canvas":{"prefixItems":[{"type":"number"},{"type":"number"}],"type":"array","maxItems":2,"minItems":2,"title":"Canvas","default":[24.0,24.0]},"element_count":{"type":"integer","title":"Element Count","default":0},"subpath_count":{"type":"integer","title":"Subpath Count","default":0},"is_stroke_based":{"type":"boolean","title":"Is Stroke Based","default":false},"elements":{"items":{"$ref":"#/components/schemas/ElementSummary"},"type":"array","title":"Elements"},"containment":{"items":{"$ref":"#/components/schemas/ContainmentRelation"},"type":"array","title":"Containment"},"clusters":{"items":{"$ref":"#/components/schemas/ClusterInfo"},"type":"array","title":"Clusters"},"components":{"items":{"$ref":"#/components/schemas/ComponentInfo"},"type":"array","title":"Components"},"symmetry":{"$ref":"#/components/schemas/SymmetryInfo"},"size_tiers":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Size Tiers"},"similarity_groups":{"additionalProperties":{"items":{"type":"string"},"type":"array"},"type":"object","title":"Similarity Groups"},"stacking_tree":{"items":{"$ref":"#/components/schemas/StackingNode"},"type":"array","title":"Stacking Tree"},"silhouette":{"anyOf":[{"$ref":"#/components/schemas/SilhouetteInfo"},{"type":"null"}]},"ascii_grid_positive":{"type":"string","title":"Ascii Grid Positive","default":""},"ascii_grid_negative":{"type":"string","title":"Ascii Grid Negative","default":""},"enrichment_text":{"type":"string","title":"Enrichment Text","default":""}},"type":"object","title":"EnrichmentOutput","description":"Complete enrichment output from the pipeline."},"FeedbackRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"Original SVG code (used for hashing)","default":""},"svg_hash":{"type":"string","title":"Svg Hash","description":"SVG hash (alternative to sending full SVG)","default":""},"prediction":{"type":"string","title":"Prediction","description":"What the system predicted"},"actual":{"type":"string","title":"Actual","description":"What the SVG actually depicts"},"learnings":{"items":{"type":"string"},"type":"array","title":"Learnings","description":"Derived insights from this session"},"element_count":{"type":"integer","title":"Element Count","default":0},"symmetry_score":{"type":"number","title":"Symmetry Score","default":0.0},"fill_pct":{"type":"number","title":"Fill Pct","default":0.0},"composition_type":{"type":"string","title":"Composition Type","default":""},"pose":{"type":"string","title":"Pose","default":""},"shape_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Shape Distribution"}},"type":"object","required":["prediction","actual"],"title":"FeedbackRequest"},"FeedbackResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"patterns_count":{"type":"integer","title":"Patterns Count","default":0},"message":{"type":"string","title":"Message","default":""}},"type":"object","title":"FeedbackResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"version":{"type":"string","title":"Version","default":"0.1.0"},"transforms_registered":{"type":"integer","title":"Transforms Registered","default":0}},"type":"object","title":"HealthResponse"},"IconSetAnalyzeRequest":{"properties":{"svgs":{"items":{"type":"string"},"type":"array","title":"Svgs","description":"List of SVG codes in the set"}},"type":"object","required":["svgs"],"title":"IconSetAnalyzeRequest"},"IconSetGenerateRequest":{"properties":{"svgs":{"items":{"type":"string"},"type":"array","title":"Svgs","description":"Reference SVG codes"},"description":{"type":"string","title":"Description","description":"Description of new icon to generate"}},"type":"object","required":["svgs","description"],"title":"IconSetGenerateRequest"},"IconSetGenerateResponse":{"properties":{"svg":{"type":"string","title":"Svg"},"rules_applied":{"items":{"type":"string"},"type":"array","title":"Rules Applied"}},"type":"object","required":["svg"],"title":"IconSetGenerateResponse"},"IconSetRulesResponse":{"properties":{"rules":{"additionalProperties":{"type":"string"},"type":"object","title":"Rules"},"common_properties":{"additionalProperties":{"type":"number"},"type":"object","title":"Common Properties"}},"type":"object","title":"IconSetRulesResponse"},"ModifyRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"Raw SVG code"},"instruction":{"type":"string","title":"Instruction","description":"Modification instruction in natural language"},"history":{"items":{"additionalProperties":{"type":"string"},"type":"object"},"type":"array","title":"History","description":"Chat history (role/content pairs) for multi-turn context"}},"type":"object","required":["svg","instruction"],"title":"ModifyRequest"},"ModifyResponse":{"properties":{"svg":{"type":"string","title":"Svg"},"changes":{"items":{"type":"string"},"type":"array","title":"Changes"},"edit_ops":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Edit Ops"},"reasoning":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reasoning"}},"type":"object","required":["svg"],"title":"ModifyResponse"},"PatternsResponse":{"properties":{"patterns":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Patterns"},"count":{"type":"integer","title":"Count","default":0}},"type":"object","title":"PatternsResponse"},"PlaygroundClickRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"Raw SVG code"},"x":{"type":"number","title":"X","description":"Click x coordinate"},"y":{"type":"number","title":"Y","description":"Click y coordinate"}},"type":"object","required":["svg","x","y"],"title":"PlaygroundClickRequest"},"PlaygroundResponse":{"properties":{"svg":{"type":"string","title":"Svg"},"action":{"type":"string","title":"Action","default":""},"element_clicked":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Element Clicked"}},"type":"object","required":["svg"],"title":"PlaygroundResponse"},"ReflectRequest":{"properties":{"svg":{"type":"string","title":"Svg","description":"SVG code to self-reflect on"},"question":{"type":"string","title":"Question","description":"Simulated user question","default":"What is this SVG?"}},"type":"object","required":["svg"],"title":"ReflectRequest"},"ReflectResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"visual_description":{"type":"string","title":"Visual Description","default":""},"llm_was_correct":{"type":"boolean","title":"Llm Was Correct","default":true},"gaps":{"items":{"type":"string"},"type":"array","title":"Gaps"},"patterns_derived":{"type":"integer","title":"Patterns Derived","default":0}},"type":"object","title":"ReflectResponse"},"SilhouetteInfo":{"properties":{"shape_class":{"type":"string","title":"Shape Class","default":"organic"},"bbox":{"prefixItems":[{"type":"number"},{"type":"number"},{"type":"number"},{"type":"number"}],"type":"array","maxItems":4,"minItems":4,"title":"Bbox","default":[0.0,0.0,0.0,0.0]},"aspect_ratio":{"type":"number","title":"Aspect Ratio","default":1.0},"circularity":{"type":"number","title":"Circularity","default":0.0},"convexity":{"type":"number","title":"Convexity","default":0.0}},"type":"object","title":"SilhouetteInfo"},"StackingNode":{"properties":{"element_id":{"type":"string","title":"Element Id"},"shape_class":{"type":"string","title":"Shape Class","default":"organic"},"size_tier":{"type":"string","title":"Size Tier","default":"MEDIUM"},"z_order":{"type":"integer","title":"Z Order","default":0},"position":{"type":"string","title":"Position","default":""},"children":{"items":{"$ref":"#/components/schemas/StackingNode"},"type":"array","title":"Children"}},"type":"object","required":["element_id"],"title":"StackingNode"},"SymmetryInfo":{"properties":{"axis_type":{"type":"string","title":"Axis Type","default":"none"},"score":{"type":"number","title":"Score","default":0.0},"pairs":{"items":{"prefixItems":[{"type":"string"},{"type":"string"}],"type":"array","maxItems":2,"minItems":2},"type":"array","title":"Pairs"},"on_axis":{"items":{"type":"string"},"type":"array","title":"On Axis"},"rotational_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rotational Order"}},"type":"object","title":"SymmetryInfo"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}